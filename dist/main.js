(()=>{"use strict";const e=e=>{const t=document.getElementById(e),o=document.getElementById("thanks"),s=t.querySelector('input[type="checkbox"]'),i=t.querySelector('input[name="name"]'),n=t.querySelector('input[type="tel"]'),l=[...t.querySelectorAll("#footer_form input[type=radio]")];let r=document.querySelector("#price-total");const a=document.createElement("div");a.style.cssText="font-size: 16px",a.style.color="red",a.style.margin="5px 0 0 0";const d=()=>{setTimeout((()=>{a.textContent=""}),5e3)};s&&(s.removeAttribute("required"),i.removeAttribute("required"),n.removeAttribute("required")),t.addEventListener("submit",(e=>{if(e.preventDefault(),i&&(""==n.value||""==i.value))return t.appendChild(a),a.textContent="Необходимо заполнить все поля!",void d();s&&!s.checked?(t.appendChild(a),a.textContent="Согласитесь на обработку персональных данных",d()):(h(e,t),setTimeout((()=>{o.style.display="none"}),5e3),c(t))}));const c=()=>{[...t.querySelectorAll('input[type="text"]'),...t.querySelectorAll('input[type="tel"]')].forEach((e=>{e.value=""})),s&&(s.checked=!1),a.textContent=""};o.addEventListener("click",(e=>{(e.target.matches(".overlay")||e.target.matches("[class *= close]"))&&(o.style.display="none")}));const p=e=>{o.querySelector("p").textContent=e,o.style.display="block"};t.addEventListener("change",(()=>{(l[0]||l[1])&&(l[0].checked?l[1].checked=!1:(l[0].checked=!1,l[1].checked=!0))}));const h=(e,t)=>{e.preventDefault(),t.appendChild(a),a.textContent="Загрузка...";const o=new FormData(t);let s={};o.forEach(((e,t)=>{s[t]=e})),"card_order"==t.id&&(s.price=r.textContent),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(s).then((e=>{if(200!==e.status)throw new Error("status network not 200");p("Спасибо! Мы скоро свяжемся с вами!")})).catch((e=>{p("Что-то пошло не так..."),console.log(e)}))}};(()=>{const e=document.querySelector(".clubs-list>ul");let t=!1;e.style.display="none",document.addEventListener("click",(o=>{o.target.closest(".club-select")&&"none"==e.style.display||o.target.matches(".clubs-list ul>li")?(t=!0,e.style.display="block"):t&&!o.target.matches(".clubs-list ul")&&(t=!1,e.style.display="none")}))})(),(()=>{const e=document.querySelector(".main-slider").querySelectorAll(".slide");let t=0;const o=()=>{e[t].style.display="none",t++,t>=e.length&&(t=0),e[t].style.display="flex"};((e=2e3)=>{setInterval(o,e)})(2e3)})(),((e="+7 (___) ___-__-__")=>{const t=document.querySelectorAll('input[type="tel"]');function o(t){const o=t.keyCode,s=e,i=s.replace(/\D/g,""),n=this.value.replace(/\D/g,"");let l=0,r=s.replace(/[_\d]/g,(e=>l<n.length?n.charAt(l++)||i.charAt(l):e));l=r.indexOf("_"),-1!==l&&(r=r.slice(0,l));let a=s.substr(0,this.value.length).replace(/_+/g,(e=>"\\d{1,"+e.length+"}")).replace(/[+()]/g,"\\$&");a=new RegExp("^"+a+"$"),(!a.test(this.value)||this.value.length<6||o>47&&o<58)&&(this.value=r),"blur"===t.type&&this.value.length<6&&(this.value="")}for(const e of t)e.addEventListener("input",o),e.addEventListener("focus",o),e.addEventListener("blur",o)})(),(()=>{const e=/^[а-яА-Я]+$/;document.body.addEventListener("focusout",(t=>{let o=t.target;"name"==o.name&&"Промокод"!==o.placeholder?(o.style.border="1px solid #b7b7b7",o.setCustomValidity(""),(!e.test(o.value)||o.value.length<2)&&(o.setCustomValidity("Введите имя"),o.value="",o.style.border="3px solid red")):"phone"==o.name&&(o.value.length<=17&&(o.setCustomValidity("Введите 11 цифр"),o.value="",o.style.border="3px solid red"),o.value.length>17&&(o.setCustomValidity(""),o.style.border="1px solid #b7b7b7"))}))})(),e("form1"),e("form2"),e("card_order"),e("banner-form"),e("footer_form"),(()=>{const e=document.querySelector("div#free_visit_form"),t=document.querySelector("div#callback_form"),o=document.querySelector("#gift");document.querySelector("#callback_footer_form-phone"),document.body.addEventListener("click",(s=>{s.target.matches(".open-popup")?e.style.display="block":s.target.matches(".callback-btn")?s.target.closest("#footer_form")||(t.style.display="block"):s.target.closest(".fixed-gift")?(s.target.style.display="none",o.style.display="block"):(s.target.matches(".overlay")||s.target.matches("[class *= close]"))&&document.querySelectorAll(".popup").forEach((e=>{e.style.display="none"}))}))})(),(()=>{const e=document.getElementById("card_order"),t=document.querySelector("#price-total"),o=document.querySelector('input[placeholder = "Промокод"]'),s=document.querySelector("#card_leto_mozaika"),i=document.querySelector("#card_leto_schelkovo"),n={mozaika:{1:1999,6:9900,9:13900,12:19900},schelkovo:{1:2999,6:14990,9:21990,12:24990}};let l=document.querySelector("html").id,r=1;e.addEventListener("change",(e=>{if(l&&e.target.matches('input[type="radio"]'))r=e.target.value,"mozaika"==l?t.innerHTML=n.mozaika[r]:"schelkovo"==l&&(t.innerHTML=n.schelkovo[r]);else if(!l&&e.target.matches("input")){const l=()=>{i.checked?t.innerHTML=n.schelkovo[r]:s.checked&&(t.innerHTML=n.mozaika[r])},a=e=>{o&&"ТЕЛО2021"===e.trim()&&(t.innerHTML=t.textContent-Math.floor(.3*t.textContent))};e.target.closest(".time")?(s&&s.checked&&(r=e.target.value,t.innerHTML=n.mozaika[e.target.value]),i&&i.checked&&(r=e.target.value,t.innerHTML=n.schelkovo[e.target.value])):(l(),e.target.matches('input[placeholder = "Промокод"]')&&a(e.target.value))}}))})(),(()=>{const e=document.querySelector("#totop");e.style.display="none",window.addEventListener("scroll",(t=>{t.preventDefault(),window.pageYOffset>680?e.style.display="block":e.style.display="none"})),e.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})}))})(),(()=>{const e=document.querySelector(".top-menu"),t=document.querySelector(".popup-menu");["scroll","resize"].forEach((t=>window.addEventListener(t,(()=>{window.pageYOffset>130&&window.innerWidth<768?e.style.position="fixed":e.style.position=""}),!1))),document.addEventListener("click",(e=>{const o=e.target;o.closest(".menu-button")&&(t.style.display="flex"),(o.closest(".close-menu-btn")||o.closest(".scroll"))&&(t.style.display="none")}))})(),(()=>{const e=document.querySelector(".gallery-slider"),t=e.querySelectorAll(".slide"),o=document.querySelectorAll(".dot"),s=document.querySelectorAll(".slider-dots > li");for(let e=1;e<t.length;e++)t[e].style.display="none",t[e].style.opacity=0;let i,n=0;const l=e=>{t[e].style.display="none",t[e].style.opacity=0,s[e].classList.remove("slick-active")},r=e=>{t[e].style.display="block",t[e].style.opacity=1,s[e].classList.add("slick-active")},a=()=>{l(n),n++,n>=t.length&&(n=0),r(n)},d=(e=3e3)=>{i=setInterval(a,e)};e.addEventListener("click",(e=>{e.preventDefault();let s=e.target;s.matches(".slider-arrow, .dot")&&(l(n),s.matches(".next")?n++:s.matches(".prev")?n--:s.matches(".dot")&&o.forEach(((e,t)=>{e===s&&(n=t)})),n>=t.length&&(n=0),n<0&&(n=t.length-1),r(n))})),e.addEventListener("mouseover",(e=>{(e.target.matches(".slider-arrow")||e.target.matches(".dot"))&&clearInterval(i)})),e.addEventListener("mouseout",(e=>{(e.target.matches(".slider-arrow")||e.target.matches(".dot"))&&d()})),d()})(),new class{constructor({main:e,wrap:t,next:o,prev:s,infinity:i=!1,position:n=0,slidesToShow:l=4,responsive:r=[]}){e&&t||console.warn('SliderCarousel: Необохдимо передать свойства "main" и "wrap"!'),this.main=document.querySelector(e),this.wrap=document.querySelector(t),this.slides=this.wrap.querySelectorAll(".slide"),this.next=document.querySelector(o),this.prev=document.querySelector(s),this.slidesToShow=l,this.options={position:n,infinity:i,widthSlide:Math.floor(100/this.slidesToShow),maxPosition:this.slides.length-this.slidesToShow},this.responsive=r}init(){this.addClass(),this.addStyle(),this.prev&&this.next,this.controlSLider(),this.responsive&&this.responseInit()}responseInit(){const e=this.slidesToShow,t=this.responsive.map((e=>e.breakpoint)),o=Math.max(...t),s=()=>{const s=document.documentElement.clientWidth;if(s<o)for(let o=0;o<t.length;o++)s<t[o]?(this.slidesToShow=this.responsive[o].slideToShow,this.options.widthSlide=Math.floor(100/this.slidesToShow),this.addStyle()):(this.slidesToShow=e,this.options.widthSlide=Math.floor(100/this.slidesToShow),this.addStyle())};s(),window.addEventListener("resize",s)}addClass(){this.main.classList.add("glo-slider"),this.wrap.classList.add("glo-slider__wrap");for(const e of this.slides)e.classList.add("glo-slider__item")}addStyle(){let e=document.getElementById("slider-carousel-style");e||(e=document.createElement("style"),e.id="slider-carousel-style"),e.textContent=`\n                .glo-slider {\n                    position: relative !important;\n                    overflow: hidden !important;\n                }\n                .glo-slider__wrap {\n                    padding: 0px !important;\n                    display: flex !important;\n                    transition: transform 0.5s !important;\n                    will-change: transform !important;\n                }\n                .glo-slider__item {\n                    flex: 0 0 ${this.options.widthSlide}% !important;\n                    margin: 0 auto !important;\n                }\n            `,document.head.append(e)}controlSLider(){this.prev.addEventListener("click",this.prevSlider.bind(this)),this.next.addEventListener("click",this.nextSlider.bind(this))}prevSlider(){(this.options.infinity||this.options.position>0)&&(--this.options.position,this.options.position<0&&(this.options.position=this.options.maxPosition),this.wrap.style.transform=`translateX(-${this.options.position*this.options.widthSlide}%)`)}nextSlider(){(this.options.infinity||this.options.position<this.options.maxPosition)&&(++this.options.position,this.options.position>this.options.maxPosition&&(this.options.position=0),this.wrap.style.transform=`translateX(-${this.options.position*this.options.widthSlide}%)`)}}({main:"#services>.wrapper",wrap:".services-slider",prev:".wrap-wrap .prev",next:".wrap-wrap .next",slidesToShow:4,infinity:!0,responsive:[{breakpoint:1024,slideToShow:3},{breakpoint:768,slideToShow:2},{breakpoint:576,slideToShow:1}]}).init()})();